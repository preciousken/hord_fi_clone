import{r as u,bm as y,bn as Qe,bo as Ye,bp as We,bq as x,br as $,bs as Ge,bt as Xe,bu as et,bv as Se,bw as tt,bx as H,by as nt,bz as Ne,bA as Z,j as t,bB as f,bC as k,bD as it,bE as z,bF as ot,bG as at,bH as C,bI as d,bJ as lt,bK as st,bL as rt,bM as Oe,bN as ct,bO as dt,bP as ut,bQ as T,bR as ae,bS as vt,bT as mt,bU as yt,bV as pt,bW as ht,bX as Ie,bY as le,bZ as gt,b_ as U,b$ as _t,c0 as Ee,c1 as E,c2 as se,c3 as V,c4 as wt,c5 as Ae,c6 as ft,c7 as bt,c8 as xt,c9 as ue,ca as ve,cb as K,cc as jt,cd as kt,ce as Ct,cf as re,cg as Pt,ch as Wt,ci as St,cj as Nt,ck as Le,cl as Ot,cm as Ve,cn as ce,co as De,cp as It,cq as Et,cr as At,cs as Lt,ct as Vt,cu as Dt,cv as Re,cw as Rt,cx as me,cy as Q,cz as Mt,cA as $t,cB as Tt,cC as Ut,cD as Me,cE as $e,cF as Te,cG as Bt,cH as Ft,cI as Zt,cJ as Kt,cK as Ht,cL as Ue,cM as F,cN as Be,cO as zt,cP as qt,cQ as Jt,cR as Qt,cS as Yt,cT as Gt,cU as Xt,cV as en,cW as tn,cX as nn,cY as on,cZ as Fe,c_ as an,c$ as ln,d0 as sn,d1 as rn,d2 as cn,d3 as dn,d4 as un}from"./index-DrakyAIp.js";import"./vendor-BosuxZz1.js";var ye,vn=["title","titleId"];function Y(){return Y=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Y.apply(this,arguments)}function mn(e,n){if(e==null)return{};var i=yn(e,n),o,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)o=l[a],!(n.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}function yn(e,n){if(e==null)return{};var i={},o=Object.keys(e),a,l;for(l=0;l<o.length;l++)a=o[l],!(n.indexOf(a)>=0)&&(i[a]=e[a]);return i}var pn=function(n){var i=n.title,o=n.titleId,a=mn(n,vn);return u.createElement("svg",Y({width:18,height:18,viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":o},a),i?u.createElement("title",{id:o},i):null,ye||(ye=u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.25 3a3.751 3.751 0 0 0-3.59 4.84.743.743 0 0 1-.187.746L3 13.062V15h1.5v-.75a.75.75 0 0 1 .75-.75H6v-.75a.75.75 0 0 1 .75-.75h1.188l1.476-1.473a.743.743 0 0 1 .746-.187A3.751 3.751 0 1 0 11.25 3ZM6 15v.75a.75.75 0 0 1-.75.75H3A1.5 1.5 0 0 1 1.5 15v-1.938c0-.398.156-.78.438-1.062l4.171-4.172A5.251 5.251 0 0 1 11.25 1.5a5.251 5.251 0 0 1 5.251 5.25 5.251 5.251 0 0 1-6.328 5.14l-1.39 1.391a.75.75 0 0 1-.532.219H7.5v.75a.75.75 0 0 1-.75.75Zm4.5-9.75a.75.75 0 0 1 .75-.75 2.25 2.25 0 0 1 2.25 2.25.75.75 0 0 1-1.5 0 .75.75 0 0 0-.75-.75.75.75 0 0 1-.75-.75Zm0 0",fill:"currentColor"})))},pe,hn=["title","titleId"];function G(){return G=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},G.apply(this,arguments)}function gn(e,n){if(e==null)return{};var i=_n(e,n),o,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)o=l[a],!(n.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}function _n(e,n){if(e==null)return{};var i={},o=Object.keys(e),a,l;for(l=0;l<o.length;l++)a=o[l],!(n.indexOf(a)>=0)&&(i[a]=e[a]);return i}var wn=function(n){var i=n.title,o=n.titleId,a=gn(n,hn);return u.createElement("svg",G({width:14,height:12,viewBox:"0 0 14 12",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":o},a),i?u.createElement("title",{id:o},i):null,pe||(pe=u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 1.333c-.736 0-1.333.597-1.333 1.334v6.666c0 .737.597 1.334 1.333 1.334h2.667C6.403 10.667 7 10.07 7 9.333v-.666a.667.667 0 0 1 1.333 0v.666A2.667 2.667 0 0 1 5.667 12H3A2.667 2.667 0 0 1 .333 9.333V2.667A2.667 2.667 0 0 1 3 0h2.667a2.667 2.667 0 0 1 2.666 2.667v.666a.667.667 0 1 1-1.333 0v-.666c0-.737-.597-1.334-1.333-1.334H3Zm6.862 1.529c.26-.26.682-.26.943 0l2.666 2.667c.26.26.26.682 0 .942l-2.666 2.667a.667.667 0 0 1-.943-.943l1.529-1.528H3.667a.667.667 0 0 1 0-1.334h7.724L9.862 3.805a.667.667 0 0 1 0-.943Z"})))},he,fn=["title","titleId"];function X(){return X=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},X.apply(this,arguments)}function bn(e,n){if(e==null)return{};var i=xn(e,n),o,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)o=l[a],!(n.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}function xn(e,n){if(e==null)return{};var i={},o=Object.keys(e),a,l;for(l=0;l<o.length;l++)a=o[l],!(n.indexOf(a)>=0)&&(i[a]=e[a]);return i}var jn=function(n){var i=n.title,o=n.titleId,a=bn(n,fn);return u.createElement("svg",X({width:14,height:14,viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":o},a),i?u.createElement("title",{id:o},i):null,he||(he=u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.04 1.96a1 1 0 0 0-1.414 0l-.528.528 1.414 1.414.529-.528a1 1 0 0 0 0-1.414Zm-1.47 2.885L9.154 3.431l-7.488 7.488v1.438h1.39l7.512-7.512Zm-.886-3.828a2.333 2.333 0 0 1 3.3 3.3l-9.18 9.178a.666.666 0 0 1-.47.195H1a.667.667 0 0 1-.667-.666v-2.381c0-.177.07-.347.196-.472l9.155-9.154Z",fill:"currentColor",fillOpacity:.65})))},ge,_e,we,fe,kn=["title","titleId"];function ee(){return ee=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},ee.apply(this,arguments)}function Cn(e,n){if(e==null)return{};var i=Pn(e,n),o,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)o=l[a],!(n.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}function Pn(e,n){if(e==null)return{};var i={},o=Object.keys(e),a,l;for(l=0;l<o.length;l++)a=o[l],!(n.indexOf(a)>=0)&&(i[a]=e[a]);return i}var Wn=function(n){var i=n.title,o=n.titleId,a=Cn(n,kn);return u.createElement("svg",ee({width:40,height:40,viewBox:"0 0 42 42",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":o},a),i?u.createElement("title",{id:o},i):null,ge||(ge=u.createElement("path",{d:"M31.583 11.75a7.617 7.617 0 0 0-1.25-.083H13.667c-.467 0-.917.033-1.35.1.233-.467.566-.9.966-1.3L18.7 5.033a5.875 5.875 0 0 1 8.267 0l2.916 2.95a5.623 5.623 0 0 1 1.7 3.767Z",fill:"#2660FF"})),_e||(_e=u.createElement("path",{opacity:.4,d:"M38.667 20v8.333c0 5-3.334 8.334-8.334 8.334H14.717a5.988 5.988 0 0 0 1.316-1.567c.617-1 .967-2.184.967-3.434A6.665 6.665 0 0 0 10.333 25c-2 0-3.783.883-5 2.267V20c0-4.534 2.734-7.7 6.984-8.233.433-.067.883-.1 1.35-.1h16.666c.434 0 .85.016 1.25.083 4.3.5 7.084 3.683 7.084 8.25Z",fill:"#2660FF"})),we||(we=u.createElement("path",{d:"M38.667 20.833h-5a3.343 3.343 0 0 0-3.334 3.334c0 1.833 1.5 3.333 3.334 3.333h5",fill:"#2660FF"})),fe||(fe=u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.333 25a6.667 6.667 0 1 0 0 13.333 6.667 6.667 0 0 0 0-13.333ZM2 31.667a8.333 8.333 0 1 1 16.667 0 8.333 8.333 0 0 1-16.667 0Zm8.577-3.09a.833.833 0 0 1 1.179 0l2.5 2.5a.833.833 0 0 1 0 1.18l-2.5 2.5a.833.833 0 0 1-1.179-1.18l1.078-1.077H7a.833.833 0 0 1 0-1.666h4.655l-1.078-1.078a.833.833 0 0 1 0-1.178Z",fill:"#2660FF"})))},be,Sn=["title","titleId"];function te(){return te=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},te.apply(this,arguments)}function Nn(e,n){if(e==null)return{};var i=On(e,n),o,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)o=l[a],!(n.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}function On(e,n){if(e==null)return{};var i={},o=Object.keys(e),a,l;for(l=0;l<o.length;l++)a=o[l],!(n.indexOf(a)>=0)&&(i[a]=e[a]);return i}var In=function(n){var i=n.title,o=n.titleId,a=Nn(n,Sn);return u.createElement("svg",te({width:18,height:18,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":o},a),i?u.createElement("title",{id:o},i):null,be||(be=u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.256 5.244a.833.833 0 0 1 0 1.179l-3.333 3.333a.833.833 0 0 1-1.179-1.179l1.91-1.91H6.668a.833.833 0 0 1 0-1.667h7.988l-1.91-1.91a.833.833 0 1 1 1.178-1.18l3.333 3.334Zm-11.91 8.09h7.987a.833.833 0 1 1 0 1.666H5.345l1.91 1.91a.833.833 0 1 1-1.178 1.18l-3.333-3.334a.833.833 0 0 1 0-1.179l3.333-3.333a.833.833 0 1 1 1.179 1.179l-1.91 1.91Z",fill:"currentColor"})))},xe,En=["title","titleId"];function ne(){return ne=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},ne.apply(this,arguments)}function An(e,n){if(e==null)return{};var i=Ln(e,n),o,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)o=l[a],!(n.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}function Ln(e,n){if(e==null)return{};var i={},o=Object.keys(e),a,l;for(l=0;l<o.length;l++)a=o[l],!(n.indexOf(a)>=0)&&(i[a]=e[a]);return i}var Ze=function(n){var i=n.title,o=n.titleId,a=An(n,En);return u.createElement("svg",ne({width:18,height:18,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":o},a),i?u.createElement("title",{id:o},i):null,xe||(xe=u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.935 4.066a2.5 2.5 0 0 0-3.536 0l-.916.916a.833.833 0 0 1-1.179-1.179l.917-.916a4.167 4.167 0 0 1 5.892 5.893l-1.81 1.81-1.178-1.18 1.81-1.809a2.5 2.5 0 0 0 0-3.535Zm-10.06 6.523L4.698 9.411l-1.81 1.81a4.167 4.167 0 1 0 5.893 5.892l.918-.918a.833.833 0 0 0-1.179-1.178l-.918.917A2.5 2.5 0 0 1 4.066 12.4l1.81-1.81Zm-.488-6.38A.833.833 0 1 0 4.21 5.387l10.017 10.017a.833.833 0 1 0 1.179-1.178L5.387 4.209Z",fill:"currentColor"})))},je,Vn=["title","titleId"];function ie(){return ie=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},ie.apply(this,arguments)}function Dn(e,n){if(e==null)return{};var i=Rn(e,n),o,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)o=l[a],!(n.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}function Rn(e,n){if(e==null)return{};var i={},o=Object.keys(e),a,l;for(l=0;l<o.length;l++)a=o[l],!(n.indexOf(a)>=0)&&(i[a]=e[a]);return i}var Mn=function(n){var i=n.title,o=n.titleId,a=Dn(n,Vn);return u.createElement("svg",ie({width:28,height:28,viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":o},a),i?u.createElement("title",{id:o},i):null,je||(je=u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.834 4.667a2.333 2.333 0 0 0-2.333-2.334H7a4.668 4.668 0 0 0-4.592 3.83 4.654 4.654 0 0 1 3.425-1.496h14ZM21 7a4.667 4.667 0 0 1 4.667 4.667V21A4.667 4.667 0 0 1 21 25.667H7A4.667 4.667 0 0 1 2.333 21v-9.333A4.667 4.667 0 0 1 7 7h14Zm-4.915 3.792a3.649 3.649 0 1 1 0 7.297 3.649 3.649 0 0 1 0-7.297Zm0 1.824a1.824 1.824 0 1 1 0 3.649 1.824 1.824 0 0 1 0-3.649Zm-3.16 5.115a4.565 4.565 0 0 1-.714-.924l-4.336 4.336 1.29 1.29 1.254-1.253 1.279 1.278 1.29-1.29-1.279-1.278 1.721-1.722a4.598 4.598 0 0 1-.505-.437Z",fill:"#383C48",fillOpacity:.4})))},ke,$n=["title","titleId"];function oe(){return oe=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},oe.apply(this,arguments)}function Tn(e,n){if(e==null)return{};var i=Un(e,n),o,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)o=l[a],!(n.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}function Un(e,n){if(e==null)return{};var i={},o=Object.keys(e),a,l;for(l=0;l<o.length;l++)a=o[l],!(n.indexOf(a)>=0)&&(i[a]=e[a]);return i}var Bn=function(n){var i=n.title,o=n.titleId,a=Tn(n,$n);return u.createElement("svg",oe({width:28,height:28,viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":o},a),i?u.createElement("title",{id:o},i):null,ke||(ke=u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.5 2.333a2.333 2.333 0 0 1 2.334 2.334h-14A4.654 4.654 0 0 0 2.41 6.164 4.668 4.668 0 0 1 7 2.334h10.5Zm8.167 9.334A4.667 4.667 0 0 0 21 7H7a4.667 4.667 0 0 0-4.667 4.667V21A4.667 4.667 0 0 0 7 25.667h14A4.667 4.667 0 0 0 25.667 21v-9.333Zm-16.8.933A.933.933 0 1 1 7 12.6a.933.933 0 0 1 1.867 0Zm2.426-.933a.933.933 0 1 0 0 1.866h8.214a.933.933 0 1 0 0-1.866h-8.214Zm-2.426 4.666a.933.933 0 1 1-1.867 0 .933.933 0 0 1 1.867 0Zm2.426-.933a.933.933 0 1 0 0 1.867h8.214a.933.933 0 0 0 0-1.867h-8.214Zm-2.426 4.667a.933.933 0 1 1-1.867 0 .933.933 0 0 1 1.867 0Zm2.24-.934a.933.933 0 0 0 0 1.867h8.213a.933.933 0 1 0 0-1.867h-8.213Z",fill:"#383C48",fillOpacity:.4})))};const Ke=e=>{var n;return(n=e?.filter(({enabledAt:i,authorizationUrl:o,redirectUrl:a})=>!!i&&!!o&&!!a))!==null&&n!==void 0?n:[]},Fn=({sessionTimeout:e}={sessionTimeout:1e4})=>{var n;const{environmentId:i,user:o,projectSettings:a,onboardingOnlyJwt:l}=y(),{updateUserProfileByJWT:r}=Qe(),{handleError:s,setError:v,setIsProcessing:c,checkValidProvider:m,error:p,isProcessing:h,connectSocialAccount:_}=Ye({authMode:"link",sessionTimeout:e}),w=(n=We())!==null&&n!==void 0?n:l,L=Ke(a?.providers),I=u.useMemo(()=>{var g,j;const W=(j=(g=o?.verifiedCredentials)===null||g===void 0?void 0:g.filter(b=>b.format==="oauth"))!==null&&j!==void 0?j:[];return Object.fromEntries(new Map(W.map(b=>{var P;return[(P=b.oauthProvider)!==null&&P!==void 0?P:b.id,b]})))},[o?.verifiedCredentials]),S=g=>Se(a)?I[g]?(s($.ACCOUNT_ALREADY_LINKED,`Account already linked for provider: ${g}`),!1):L.find(b=>b.provider===g)?!0:(s($.PROVIDER_NOT_ENABLED,`Provider is not enabled on the dashboard: ${g}`),!1):(s($.SOCIAL_LINKING_NOT_ENABLED,"Social linking is not enabled on the dashboard"),!1);return{error:p,getLinkedAccountInformation:g=>{const j=I[g];if(!j)return;const{id:W,oauthAccountId:b,oauthAccountPhotos:P,oauthDisplayName:J,oauthEmails:N,oauthProvider:ze,oauthUsername:qe,publicIdentifier:Je}=j;return{accountId:b,avatar:P?.[0],displayName:J,email:N?.[0],id:W,provider:ze,publicIdentifier:Je,username:qe}},isLinked:g=>!!I[g],isProcessing:h,linkSocialAccount:g=>x(void 0,void 0,void 0,function*(){_({provider:g,validator:S})}),unlinkSocialAccount:g=>x(void 0,void 0,void 0,function*(){var j;if(v(void 0),c(!0),!m(g))return;const W=I[g];if(!W){s($.NO_ACCOUNT_LINKED,`No account linked for provider: ${g}`);return}try{const b=Ge.getFromLS(Xe),P=yield et({environmentId:i,primaryWalletId:b,verifiedCrentialId:(j=W.id)!==null&&j!==void 0?j:""},String(w));if(!P){s($.UNLINK_ERROR,`Failed to unlink social account: ${g} | ${W.id}`);return}yield r(P),c(!1)}catch{s($.GENERAL_ERROR,`Failed to unlink social account: ${g} | ${W.id}`)}})}},Zn=()=>{const{projectSettings:e,setShowAuthFlow:n}=y(),{userHasEmbeddedWallet:i}=tt(),{setView:o}=H();return{initExportProcess:u.useCallback((l=!1)=>x(void 0,void 0,void 0,function*(){var r,s;const v=We();if(!v)throw new Error("User is not logged in");if(!nt(e))throw new Error("Passkey embedded wallet is not enabled. Go to the dashboard and make sure to have both Turnkey/Passkey Embedded wallets and at least one EVM network enabled. Also, check if EthereumWalletConnectors is in the  DynamicContextProvider > settings > walletConnectors.");if(!i())throw new Error("Passkey embedded wallet not found");const c=Ne(v),m=(s=(r=c?.verifiedCredentials)===null||r===void 0?void 0:r.find(({walletName:h})=>h?.startsWith("turnkey")))===null||s===void 0?void 0:s.walletProperties,p=m?.turnkeyHDWalletId;if(l&&!p)throw new Error("Wallet is non-HD and does not have a recovery phrase");return n(!0,{ignoreIfIsEmbeddedWidget:!1,performMultiWalletChecks:!1}),o("embedded-reveal-view",{exportPrivateKey:!l}),new Promise((h,_)=>{Z.once("embeddedWalletRevealCompleted",w=>h(w)),Z.once("embeddedWalletRevealFailed",w=>_(w))})}),[n,e,o,i])}},Kn=({buttonClassName:e,buttonContainerClassName:n,onClick:i,isActive:o,isLoading:a,children:l,copykey:r})=>t.jsx("div",{className:n,children:t.jsx(f,{dataTestId:"ConnectButton",onClick:i,buttonClassName:k("connect-button",e),loading:a&&o,disabled:a&&o,buttonVariant:"primary",buttonPadding:"large",copykey:r,children:l})}),Hn=({buttonContainerClassName:e="",buttonClassName:n="",children:i,copykey:o})=>{const{isProjectSettingsLoading:a,setShowAuthFlow:l,setSelectedWalletConnectorKey:r}=y(),{setView:s}=H(),[v,c]=u.useState(!1),m=u.useCallback(()=>x(void 0,void 0,void 0,function*(){v||c(!0),r(null),l(!0)}),[v,r,l,s]);return t.jsx(Kn,{isLoading:a,isActive:v,onClick:m,buttonContainerClassName:e,buttonClassName:n,copykey:o,children:i})},zn=({zIndex:e,isShown:n,onClose:i,children:o,className:a,contentClassName:l})=>t.jsx(it,{outDuration:200,className:k("dynamic-widget-dropdown",a),isShown:n,children:t.jsx("div",{"data-testid":"DynamicWidgetDropdown",style:{zIndex:e},className:k("dynamic-widget-dropdown__root",l),children:t.jsx(z,{children:o})})}),qn=({children:e,isShown:n,onClose:i,zIndex:o,className:a,transitionEvents:l={}})=>(ot(!!n),t.jsx(at,Object.assign({zIndex:o,handleClose:()=>i?.(),isShown:n,withBackdrop:!0},l,{children:t.jsx("div",{className:k("dynamic-widget-modal",a),children:t.jsx(z,{children:e})})}))),Jn={dropdown:zn,modal:qn},Qn=({zIndex:e,variant:n,children:i,isOpen:o,setIsOpen:a,transitionEvents:l})=>{const r=Jn[n||"modal"],{goToInitialDynamicWidgetView:s}=C(),v=()=>{a(!1),setTimeout(()=>{s()},300)};return t.jsx(r,{transitionEvents:l,zIndex:e,isShown:o,onClose:v,children:i})},Yn=({name:e,label:n,value:i,copykey:o})=>{const a=i==="",l=e==="email";return t.jsxs("div",{className:"user-profile-field",children:[n&&t.jsx(d,{as:"h6",color:"secondary",weight:"regular",variant:"body_small",copykey:o,children:n}),t.jsxs("div",{className:"user-profile-field__value",children:[t.jsx(d,{color:a?"tertiary":"primary",as:"p",weight:"regular",variant:"body_normal",children:i}),l&&t.jsx(lt,{className:"user-profile-field__verify-email-icon",overwriteTooltipProps:{as:"div"}})]})]})},Ce=({title:e,children:n})=>t.jsxs("div",{className:"user-profile-section",children:[e&&t.jsx(d,{as:"h6",color:"secondary",weight:"medium",variant:"body_small",className:"user-profile-section__title",children:e}),n]}),Gn=({provider:e,avatarUrl:n,iconThemeVariant:i})=>t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"user-profile-social-account__connected-avatar",children:t.jsx(st,{src:n,alt:"User avatar",dataTestId:"user-avatar",fallback:t.jsx(rt,{})})}),t.jsx("div",{className:"user-profile-social-account__connected-provider-icon",children:t.jsx(Oe,{name:e,variant:i})})]}),Xn=({provider:e})=>{var n;const{user:i,primaryWallet:o}=y(),{linkSocialAccount:a,unlinkSocialAccount:l,isProcessing:r,isLinked:s,getLinkedAccountInformation:v}=Fn(),c=s(e),m=v(e),p=ct(),h=!o&&m&&m?.id===i?.lastVerifiedCredentialId,_=()=>t.jsx(f,{buttonClassName:"user-profile-social-account__button",buttonVariant:"secondary",buttonPadding:"none",onClick:()=>c?l(e):a(e),loading:r,dataTestId:`social-account-${c?"disconnect":"connect"}-button`,typographyProps:{color:"secondary",variant:"button_tertiary"},startSlot:t.jsx(T,{color:"text-tertiary",size:"small",children:c?t.jsx(Ze,{}):t.jsx(ae,{})}),children:c?null:"Connect"});return t.jsxs("div",{className:"user-profile-social-account","data-testid":`social-account-${e}`,children:[t.jsx("div",{className:"user-profile-social-account__icon",children:c?t.jsx(Gn,{provider:e,avatarUrl:m?.avatar}):t.jsx(Oe,{name:e,variant:p})}),t.jsx("div",{className:"user-profile-social-account__label",children:t.jsx(d,{weight:"medium",variant:"body_normal",color:"primary",children:(n=m?.publicIdentifier)!==null&&n!==void 0?n:dt(ut(e))})}),h?null:_()]})},ei=({rootClassName:e})=>{const{projectSettings:n,user:i}=y(),{error:o}=vt(),{fieldsConfig:a}=mt(),l=u.useRef(null);u.useEffect(()=>{o&&l.current&&(l.current.scrollTop=0)},[o]);const r=yt({projectSettingsKyc:n?.kyc,user:i}),s=Se(n)?Ke(n?.providers):[],v=c=>i?.[c];return i?t.jsxs("div",{"data-testid":"userProfile",className:k("user-profile",e),ref:l,children:[o&&t.jsx(pt,{children:o}),r?.length>0&&t.jsx(Ce,{title:"My information",children:t.jsx("div",{className:"user-profile__fields",children:r.map(({name:c})=>{const{label:m,key:p}=ht(a,c),h=v(c);return t.jsx(Yn,{copykey:p,name:c,label:m,value:h},c)})})}),s?.length>0&&t.jsx(Ce,{title:"Social accounts",children:t.jsx("div",{className:"user-profile__social-accounts",children:s.map(({provider:c})=>t.jsx(Xn,{provider:c},c))})})]}):null},q=({buttonClassName:e="",isTextButton:n=!1})=>{const[i,o]=u.useState(!1),{handleLogOut:a}=y(),l=()=>x(void 0,void 0,void 0,function*(){try{o(!0),yield a()}catch(r){Ie.error(r)}finally{o(!1)}});return t.jsx(f,{buttonClassName:e,buttonVariant:"tertiary",buttonPadding:n?"none":"medium",loading:i,disabled:i,onClick:l,typographyProps:n?{color:"secondary",variant:"button_tertiary"}:{color:"primary",variant:"button_secondary"},dataTestId:"logout-button",startSlot:n?t.jsx(wn,{}):void 0,expanded:!n,type:"button",children:"Log out"})},O=({children:e,onClose:n,disablePadding:i})=>t.jsx("div",{className:"widget-portal",onClick:n,"data-testid":"backdrop",children:t.jsxs("div",{className:k("widget-portal__container",{"widget-portal__container--no-padding":i}),onClick:o=>o.stopPropagation(),children:[n&&t.jsx("div",{className:"widget-portal__container__header",children:t.jsx(le,{className:"widget-portal__container__close-button",onClick:o=>n(o),type:"button","data-testid":"close-button",children:t.jsx(gt,{})})}),e]})}),A=()=>{const{setMultiWalletWidgetState:e,setSelectedWalletWithAction:n,setShowQrcodeModal:i,setDesktopUri:o,setSelectedWalletConnectorKey:a}=y();return l=>{l.stopPropagation(),n(null),e("idle"),i(!1),o(""),a(null)}},ti=()=>{const{t:e}=U(),{setMultiWalletWidgetState:n,primaryWallet:i}=y(),o=()=>{n("awaiting_signature",void 0,"linking_new_wallet")};return t.jsxs("div",{className:"detected-new-wallet-modal__content",children:[t.jsx(d,{variant:"body_normal",color:"primary",children:e("dyn_detected_new_wallet.title")}),t.jsx(Wn,{}),t.jsx(d,{variant:"body_small",color:"secondary",children:e("dyn_detected_new_wallet.description",{walletName:i?.connector.name})}),t.jsx(f,{expanded:!0,onClick:o,typographyProps:{variant:"button_secondary"},children:e("dyn_detected_new_wallet.confirm_button")})]})},ni=()=>t.jsx(O,{onClose:A(),children:t.jsx(ti,{})}),ii=(e,n)=>_t(()=>{if(e)return e.getConnectedAccounts().then(i=>n.find(o=>{var a;return o.address.toLowerCase()===((a=i[0])===null||a===void 0?void 0:a.toLowerCase())}))},{deps:[e,n]}),B=({children:e,className:n="",dataTestId:i="",icon:o,title:a})=>t.jsxs("div",{className:k("default-prompt-modal",n),"data-testid":i,children:[o&&t.jsx(Ee,{Icon:o,iconSize:96,isSpinning:!0,className:"default-prompt-modal__icon-with-spinner"}),t.jsxs("div",{className:"default-prompt-modal__content",children:[a&&t.jsx(d,{variant:"title",color:"primary","data-testid":"title",children:a}),e]})]}),oi=e=>t.jsx(O,{onClose:e.onClose,children:t.jsx(B,Object.assign({},e))}),ai=({selectedWalletToSwitchTo:e})=>t.jsxs(t.Fragment,{children:[t.jsxs(d,{variant:"body_normal",color:"secondary",weight:"regular","data-testid":"content",children:["Switch to wallet"," ",t.jsx(d,{as:"span",weight:"medium",color:"primary",children:E(e?.address,3,3)})," ","in ",e?.connector.name," to make it active."]}),t.jsx(se,{fullWidth:!0,text:"Or"}),t.jsx(q,{isTextButton:!1})]}),li=({connectedWallet:e,selectedWalletToSwitchTo:n})=>{const{setSelectedWalletWithAction:i,setSelectedWalletConnectorKey:o,setPrimaryWallet:a}=y(),l=u.useCallback(()=>x(void 0,void 0,void 0,function*(){var r,s;e&&(e.connector.connectedChain==="FLOW"&&((s=(r=e.connector).endSession)===null||s===void 0||s.call(r)),i({action:"select",wallet:e}),a(e?.id),o(e?.connector.key))}),[e,i,a,o]);return t.jsxs(t.Fragment,{children:[t.jsxs(d,{variant:"body_normal",color:"secondary",weight:"regular","data-testid":"content",children:["Wallet"," ",t.jsx(d,{as:"span",weight:"medium",color:"primary",children:E(n?.address,3,3)})," ","is not active in ",n?.connector.name,". To make active, open your ",n?.connector.name," wallet and switch to this account."]}),t.jsx(se,{fullWidth:!0,text:"Or"}),t.jsx(d,{variant:"body_normal",color:"primary",children:"Use your active wallet"}),t.jsxs(f,{buttonClassName:"default-prompt-modal__button",expanded:!0,type:"button",buttonPadding:"medium",typographyProps:{variant:"button_secondary"},onClick:l,dataTestId:"use-active-wallet-button",children:["Select"," ",t.jsx(T,{size:"xsmall",children:t.jsx(V,{walletKey:n?.connector.key})})," ",E(e?.address,3,3)]})]})},si=()=>{var e,n;const{selectedWalletWithAction:i,primaryWallet:o,secondaryWallets:a}=y(),l=(e=i?.wallet)===null||e===void 0?void 0:e.connector,r=l?.key===o?.connector.key,{data:s}=ii((n=i?.wallet)===null||n===void 0?void 0:n.connector,a);return u.useEffect(()=>{x(void 0,void 0,void 0,function*(){var c,m;l?.connectedChain==="FLOW"&&(yield(c=l?.endSession)===null||c===void 0?void 0:c.call(l),(m=l?.connect)===null||m===void 0||m.call(l))})},[l]),t.jsx(B,{dataTestId:"pending-account-switch",icon:t.jsx(V,{walletKey:l?.key}),title:`Switch wallet in ${i?.wallet.connector.name}`,children:r||!s?t.jsx(ai,{selectedWalletToSwitchTo:i?.wallet}):t.jsx(li,{connectedWallet:s,selectedWalletToSwitchTo:i?.wallet})})},ri=()=>t.jsx(O,{children:t.jsx(si,{})}),ci=()=>{const{selectedWalletConnector:e}=y();return u.useEffect(()=>{x(void 0,void 0,void 0,function*(){var i,o;e?.connectedChain==="FLOW"&&(yield(i=e?.endSession)===null||i===void 0?void 0:i.call(e),(o=e?.connect)===null||o===void 0||o.call(e))})},[e]),t.jsx(B,{dataTestId:"pending-account-switch",icon:t.jsx(V,{walletKey:e?.key}),title:`Switch wallet in ${e?.name}`,children:t.jsxs(d,{variant:"body_normal",color:"secondary",weight:"regular","data-testid":"content",children:["To link a new wallet, open"," ",t.jsx(d,{as:"span",weight:"medium",color:"primary",children:e?.name})," ","and switch to the account you want to link."]})})},di=()=>t.jsx(O,{onClose:A(),children:t.jsx(ci,{})}),ui=({onClickCancel:e})=>{var n;const{handleUnlinkWallet:i,setSelectedWalletWithAction:o,authMode:a,selectedWalletWithAction:l}=y(),{t:r}=U(),{loading:s,setLoading:v}=wt(),c=(n=l?.wallet)===null||n===void 0?void 0:n.id;if(!c)throw new Error("Wallet id is not defined");const m=()=>x(void 0,void 0,void 0,function*(){try{v(!0),yield i(c),o(null)}catch(p){Ie.error(p)}finally{v(!1)}});return t.jsxs("div",{className:"unlink-wallet-popup__container",children:[t.jsx(d,{color:"primary",className:"unlink-wallet-popup__title",variant:"body_normal",as:"h6",children:r(a==="connect-only"?"dyn_unlink_wallet_pop_up.disconnect_title":"dyn_unlink_wallet_pop_up.unlink_title")}),t.jsx(d,{className:"unlink-wallet-popup__label",variant:"body_small",color:"secondary",children:r(a==="connect-only"?"dyn_unlink_wallet_pop_up.disconnect_description":"dyn_unlink_wallet_pop_up.unlink_description")}),t.jsx(f,{buttonPadding:"small",onClick:m,disabled:s,buttonClassName:"unlink-wallet-popup__button unlink-wallet-popup__button--shadow",color:"primary",expanded:!0,typographyProps:{variant:"button_secondary",weight:"medium"},dataTestId:"unlink-wallet-popup-yes-button",children:r(a==="connect-only"?"dyn_unlink_wallet_pop_up.disconnect_button":"dyn_unlink_wallet_pop_up.unlink_button")}),t.jsx(f,{expanded:!0,buttonPadding:"small",onClick:e,buttonVariant:"secondary",buttonClassName:"unlink-wallet-popup__button",typographyProps:{variant:"button_secondary",weight:"medium"},children:r("dyn_unlink_wallet_pop_up.cancel_button")})]})},vi=()=>t.jsx(O,{onClose:A(),children:t.jsx(ui,{onClickCancel:A()})}),mi=()=>{const{accountSwitchState:e,multiWalletWidgetState:n,multiWallet:i,selectedWalletWithAction:o}=y();if(o?.action==="unlink")return"unlink_wallet";if(n==="awaiting_signature")return"pending_sign";if(n==="awaiting_account_switch"){if(e==="linking_new_wallet")return"linking_new_wallet";if(e==="primary_not_connected")return i?"primary_not_connected":"pending_account_switch";if(e==="switching_primary")return"pending_account_switch"}return n==="awaiting_connection"?"awaiting_connection":n==="detected_new_wallet"?"detected_new_wallet":"idle"},yi=()=>{const{selectedWalletConnector:e}=y(),{walletBook:n}=Ae();if(!e)return null;const i=ft(n,e.key).name,o=bt(n,e.key),{currentDesktopUrl:a,userBrowser:l}=xt(o),r=l&&a?t.jsx(ue,{name:l,link:a,Icon:ve(l)},l):Object.entries(o).filter(([,s])=>s!=="").filter(([s])=>s!=="ios"&&s!=="android").map(([s,v])=>t.jsx(ue,{name:s,link:v,Icon:ve(s)},s));return t.jsxs("div",{className:"no-qr-code-not-installed-modal-view","data-testid":"no-qr-code-not-installed",children:[t.jsx(V,{walletKey:e.key,style:{height:K(64),width:K(64)}}),t.jsxs(d,{variant:"body_normal",color:"primary",children:["We can’t detect ",i," extension"]}),Array.isArray(r)&&t.jsx(d,{variant:"body_normal",color:"secondary",children:"Select from your preferred options below:"}),t.jsx("div",{className:"no-qr-code-not-installed-modal-view__links-section",children:r}),t.jsx(d,{variant:"body_mini",color:"secondary",children:"Refresh the page once installed"})]})},pi=()=>{var e;const{selectedWalletConnector:n,authToken:i,selectedWalletWithAction:o}=y();let a,l;if(o&&jt(o.wallet.connector)){const r=kt(i,o.wallet.id);a=`Reconnecting ${Ct((e=r?.oauthProvider)!==null&&e!==void 0?e:"")}`}else a=`Connect ${n?.name} wallet`,l=t.jsxs(t.Fragment,{children:["Connect your"," ",t.jsx(d,{as:"span",weight:"medium",color:"primary",children:n?.name})," ","wallet to make active."]});return t.jsx(B,{dataTestId:"pending-connection-modal",icon:t.jsx(re,{jwt:i,wallet:o?.wallet}),title:a,children:t.jsx(d,{variant:"body_normal",color:"secondary",weight:"regular","data-testid":"content",children:l})})},hi=()=>t.jsx(O,{onClose:A(),children:t.jsx(pi,{})}),gi=({emailWalletConnector:e})=>t.jsxs("div",{className:"email-connector-pending-sign-modal-content",children:[t.jsx(Ee,{Icon:Pt,iconSize:80,isSpinning:!0}),t.jsxs("div",{className:"email-connector-pending-sign-modal-content__body",children:[t.jsx(d,{weight:"medium",variant:"title",color:"primary",className:"email-connector-pending-sign-modal-content__title",children:"Confirm your email"}),t.jsxs(d,{weight:"regular",variant:"body_normal",color:"secondary",children:["We’ve sent a verification email to"," ",t.jsx(d,{variant:"body_normal",color:"secondary",weight:"medium",as:"span",children:e.email})]}),t.jsx(d,{weight:"regular",variant:"body_small",color:"secondary",children:"Note: it might take a few seconds to proceed after clicking the link in your email"})]})]}),_i=({walletConnector:e})=>{const{setSelectedWalletWithAction:n,selectedWalletWithAction:i,setPrimaryWalletId:o,setMultiWalletWidgetState:a}=y(),[l,r]=u.useState(),{email:s}=e;if(!s)throw new Error("EmailOTPConnectorPendingSignModalContent requires a email");const{data:v,isLoading:c,mutate:m}=Wt(p=>e.verifyOneTimePassword(p),{onFailure:p=>{r(p),Z.emit("emailVerificationResult",!1,s)},onSuccess:()=>x(void 0,void 0,void 0,function*(){i&&(a("idle"),n(null),o(i.wallet.id),Z.emit("emailVerificationResult",!0,s))})});return t.jsx(St,{email:s,error:l,isLoading:c,onPinComplete:m,retryHandler:e.retryOneTimePassword.bind(e),isValid:v===!0,onPinChange:()=>r(void 0)})},wi=()=>{const{selectedWalletConnector:e,setMultiWalletWidgetState:n}=y(),{signAlreadyConnectedUser:i}=Nt(),o=()=>x(void 0,void 0,void 0,function*(){try{e&&(yield i({walletConnector:e}))}catch(a){Ot.error(a)}finally{n("idle")}});return t.jsxs(oi,{onClose:A(),dataTestId:"pending-account-switch",icon:t.jsx(V,{walletKey:e?.key}),title:`Sign in with ${e?.name}`,children:[t.jsx(d,{variant:"body_normal",color:"secondary",weight:"regular","data-testid":"content",children:"Sign the message in your wallet to approve linking this wallet to your account"}),Le()&&!e?.canConnectViaCustodialService&&t.jsx(f,{buttonClassName:"default-prompt-modal__button",expanded:!0,type:"button",buttonPadding:"medium",typographyProps:{variant:"button_secondary"},onClick:o,dataTestId:"click-to-sign-button",children:"Click to Sign"})]})},fi=()=>{const{selectedWalletConnector:e}=y();if(e!==null){if(Ve(e))return t.jsx(_i,{walletConnector:e});if(ce(e))return t.jsx(gi,{emailWalletConnector:e})}return t.jsx(wi,{})},He=()=>t.jsx(O,{onClose:A(),children:t.jsx(fi,{})}),bi=({walletId:e})=>{var n,i;const{secondaryWallets:o,qrcodeUri:a,desktopUri:l}=y(),{walletBook:r}=Ae(),s=o.find(({id:w})=>w===e),v=((n=s?.connector)===null||n===void 0?void 0:n.key)||"",c=((i=s?.connector)===null||i===void 0?void 0:i.name)||"",{theme:m}=De(),p={dark:{accentColor:"var(--dynamic-text-primary)"},light:{accentColor:It(r,v)||"var(--dynamic-text-primary)"}},h=m.theme.name==="light"?"light":"dark",_=t.jsx(V,{walletKey:v,style:{height:K(24),width:K(24)}});return t.jsxs("div",{className:"qr-code-modal-view",children:[t.jsxs(d,{variant:"button_primary",color:"primary",className:"qr-code-modal-view__title",children:["Connect with ",s?.connector.name]}),t.jsxs(d,{variant:"body_small",color:"secondary",className:"qr-code-modal-view__title",children:["Connect wallet"," ",t.jsx(d,{as:"span",weight:"medium",color:"primary",children:E(s?.address,4,4)})," ","to switch active account."]}),t.jsx("div",{className:"qr-code-modal-view__container",children:t.jsx("div",{className:"qr-code-modal-view__wrapper",children:a?t.jsx(Et,{Icon:_,accentColor:p[h].accentColor,value:a,size:175,logoSize:40,walletKey:v}):t.jsx("div",{"data-testid":"no-qrcode"})})}),t.jsxs("div",{className:"button__container",children:[s?.connector.isWalletConnect&&a&&t.jsxs(At,{textToCopy:a,children:[t.jsx(T,{size:"small",color:"text-tertiary",children:t.jsx(Lt,{})}),"Copy QR URI"]}),l&&t.jsxs(Vt,{className:"button--open-app",onClick:()=>window.open(l),children:[t.jsx(T,{size:"xsmall",color:"text-tertiary",children:t.jsx(Dt,{})}),"Open ",c," App"]})]})]})},xi=({PendingSign:e,PendingConnection:n})=>{var i,o;const{selectedWalletConnector:a,showQrcodeModal:l,selectedWalletWithAction:r}=y(),s=u.useMemo(()=>a&&(Ve(a)||ce(a))?e:n,[a]);return l?a?.canConnectViaQrCode?t.jsx(bi,{walletId:(o=(i=r?.wallet)===null||i===void 0?void 0:i.id)!==null&&o!==void 0?o:""}):t.jsx(yi,{}):t.jsx(s,{})},ji=()=>t.jsx(O,{onClose:A(),children:t.jsx(xi,{PendingSign:He,PendingConnection:hi})}),ki=()=>{var e;const{primaryWallet:n}=y();return t.jsxs(B,{dataTestId:"wallet-not-connected",icon:t.jsx(V,{walletKey:(e=n?.connector)===null||e===void 0?void 0:e.key}),title:`Switch wallet in ${n?.connector.name}`,children:[t.jsxs(d,{variant:"body_normal",color:"secondary",weight:"regular","data-testid":"content",children:["Your active wallet in"," ",t.jsx(d,{as:"span",weight:"medium",color:"primary",children:n?.connector.name})," ","is not linked. Please switch to wallet"," ",t.jsx(d,{as:"span",weight:"medium",color:"primary",children:E(n?.address,3,3)})," ","to log in."]}),t.jsx(d,{variant:"body_normal",color:"secondary",weight:"regular","data-testid":"content",children:"You can link this wallet to this account after you log in."}),t.jsx(se,{fullWidth:!0,text:"Or"}),t.jsx(q,{isTextButton:!1,buttonClassName:"primary-not-connected__log-out-button"})]})},Ci=()=>t.jsx(O,{children:t.jsx(ki,{})}),Pi=()=>{const e=mi(),n={awaiting_connection:ji,detected_new_wallet:ni,linking_new_wallet:di,pending_account_switch:ri,pending_sign:He,primary_not_connected:Ci,unlink_wallet:vi};if(e==="idle")return null;const i=n[e];return t.jsx(i,{})},Wi=({text:e,copykey:n})=>{const{isTurnkeyWalletWithoutAuthenticator:i}=Re();return t.jsxs("div",{className:k("empty-wallet__container",{"empty-wallet__container--big":!i}),children:[t.jsx(T,{className:"empty-wallet__icon",size:"medium",children:t.jsx(Rt,{})}),t.jsx("div",{className:k({"empty-wallet__text-container":!i}),children:t.jsx(d,{variant:"body_small",color:"secondary",copykey:n,children:e})})]})},Si=({wallet:e,ens:n})=>{var i;const{id:o,connector:a,address:l}=e,{setPrimaryWallet:r,setSelectedWalletConnectorKey:s,setShowWidgetStatePopup:v,setSelectedWalletWithAction:c,authToken:m,primaryWallet:p,user:h,projectSettings:_,authMode:w}=y(),L=(i=h?.verifiedCredentials.find(M=>M.format==="email"))===null||i===void 0?void 0:i.email,I=20,S=[{Icon:t.jsx(In,{}),callback:()=>R(),text:"Select wallet"}];n?.name&&S.push({Icon:t.jsx(me,{}),callback:()=>Q(n.name),text:"Copy ENS"}),S.push({Icon:t.jsx(me,{}),callback:()=>Q(l||""),text:"Copy address"}),!Mt(a)&&!_?.sdk.multiWalletUnlinkDisabled&&S.push({Icon:t.jsx(Ze,{}),callback:()=>c({action:"unlink",wallet:e}),text:`${w==="connect-only"?"Disconnect":"Unlink"} from my account`});const D=$t(a,_?.providers);D&&S.push({Icon:t.jsx(pn,{}),callback:D,text:"Export private keys"});const R=()=>x(void 0,void 0,void 0,function*(){p?.chain==="flow"&&a.connectedChain==="FLOW"&&(yield a.endSession()),ce(a)&&L&&a.setEmail(L),v(!0),c({action:"select",wallet:e}),r(o),s(a.key)});return t.jsxs("div",{className:"wallet__container","data-testid":"wallet",children:[t.jsxs("div",{className:"wallet__row",children:[t.jsx("div",{className:"wallet__icon-container",children:t.jsx(re,{iconSize:I,jwt:m,wallet:e,showStatus:!0})}),n?.name?t.jsxs(t.Fragment,{children:[t.jsx(d,{className:"wallet__ens-name",variant:"body_small",color:"primary",truncate:!0,children:n?.name}),t.jsx("div",{className:"wallet__row__seperator"}),t.jsx(d,{variant:"body_mini",color:"secondary",children:E(l,3,3)})]}):t.jsx(d,{variant:"body_small",color:"primary",children:E(l,4,4)})]}),t.jsx(Tt,{"data-testid":"dots-menu",options:S,buttonClassName:"wallet__menu",direction:"left"})]})},Ni=()=>{const{t:e}=U(),{secondaryWallets:n,user:i,authMode:o}=y(),{availableWalletsContainerRef:a}=C(),l=n.length===0;return t.jsxs("div",{ref:a,className:"dynamic-widget-wallets","data-testid":"dynamicWidgetWallets",children:[t.jsx(d,{weight:"medium",variant:"body_small",color:"secondary",className:"dynamic-widget-wallets__title",copykey:"dyn_widget.other_wallets",children:e("dyn_widget.other_wallets")}),t.jsx("div",{className:k("dynamic-widget-wallets__body",{"dynamic-widget-wallets__body--apply-height":!l}),children:l?t.jsx(Wi,{copykey:"dyn_widget.empty_wallets",text:e("dyn_widget.empty_wallets",{action:e(o==="connect-and-sign"?"dyn_widget.empty_wallets_action_link":"dyn_widget.empty_wallets_action_connect")})}):t.jsx("div",{className:"dynamic-widget-wallets__body__wallet-list",children:n.map((r,s)=>{var v;return t.jsx(Si,{ens:(v=Ut(r.address,i?.verifiedCredentials,r.chain))===null||v===void 0?void 0:v.nameService,wallet:r},r.id)})})})]})},Oi=()=>{var e;const{primaryWallet:n,handleLogOut:i,user:o}=y(),a=o?.verifiedCredentials.find(r=>r.walletName==="unknown"),l=(e=n?.address)!==null&&e!==void 0?e:a?.address;return t.jsxs("div",{className:"single-wallet-buttons",children:[l&&t.jsx(f,{dataTestId:"Copy address",expanded:!0,buttonPadding:"medium",typographyProps:{className:"single-wallet-buttons--center",variant:"button_primary"},onClick:()=>Q(n?.address||a?.address||o?.email||""),feedback:t.jsxs("div",{className:"single-wallet-buttons__copied",children:[t.jsx(Me,{})," Copied!"]}),children:"Copy address"}),t.jsx(f,{dataTestId:"Disconnect",expanded:!0,buttonPadding:"medium",typographyProps:{className:"single-wallet-buttons--center",variant:"button_primary"},onClick:i,children:"Disconnect"})]})},Ii=()=>{const{setShowLinkNewWalletModal:e,setSelectedWalletConnectorKey:n,user:i,authMode:o,multiWallet:a}=y(),l=$e(),{setView:r}=H(),s=()=>{r("multi-wallet-wallet-list"),e(!0),n(null)};return t.jsxs(t.Fragment,{children:[!a&&!l&&t.jsxs("div",{className:"dynamic-widget-index-view__email-container",children:[t.jsx(d,{children:i?.email}),t.jsx(Oi,{})]}),a&&t.jsxs(t.Fragment,{children:[t.jsx(Ni,{}),t.jsx(Te,{children:t.jsxs("div",{className:"dynamic-widget-index-view__footer",children:[t.jsxs(f,{buttonClassName:"dynamic-widget-footer__button",buttonVariant:"tertiary",buttonPadding:"none",onClick:s,typographyProps:{color:"secondary",variant:"button_tertiary"},startSlot:t.jsx(ae,{}),children:[o==="connect-only"?"Connect":"Link"," a new wallet"]}),t.jsx(q,{isTextButton:!0,buttonClassName:"dynamic-widget-footer__button"})]})})]})]})},Ei=()=>{const{setDynamicWidgetView:e}=C(),{projectSettings:n}=y(),i=Bt(n?.kyc);return t.jsxs(t.Fragment,{children:[t.jsx(ei,{rootClassName:"profile-view"}),t.jsx(Te,{children:t.jsxs("div",{className:"profile-view__footer",children:[i.length>0&&t.jsx(f,{buttonClassName:"dynamic-widget-footer__button",buttonVariant:"tertiary",buttonPadding:"none",typographyProps:{color:"secondary",variant:"button_tertiary"},onClick:()=>e("edit-profile"),startSlot:t.jsx(jn,{}),children:"Edit profile"}),t.jsx(q,{isTextButton:!0,buttonClassName:k("dynamic-widget-footer__button",{"dynamic-widget-footer__button-align-right":!i?.length})})]})})]})},Ai=({rootClassName:e})=>{const{setView:n}=H(),{setShowAuthFlow:i,multiWallet:o}=y(),{goToProfileView:a}=C(),{updateUser:l}=Ft({validationSchemaStripUnknown:!0}),r=u.useCallback(v=>x(void 0,void 0,void 0,function*(){const{isEmailVerificationRequired:c}=yield l(v);a(),c&&(i(!0,{ignoreIfIsEmbeddedWidget:!1,initializeWalletConnect:!1,performMultiWalletChecks:!1}),n("verify-email"))}),[a,i,n,l]),s=$e();return t.jsxs(t.Fragment,{children:[!o&&s&&t.jsx(d,{weight:"regular",color:"secondary",variant:"body_normal",className:"dynamic-widget-edit-profile-view__profile-title",children:"My information"}),t.jsx(Zt,{formClassName:e,onEditProfileSubmit:r,onEditProfileCancel:a})]})},Li=()=>{const{goToInitialDynamicWidgetView:e}=C();return t.jsx("div",{className:"send-balance-widget-view",children:t.jsx(Kt,{onClickBack:e,onDone:e})})},Vi=()=>{var e;const{setDynamicWidgetView:n}=C(),{userPasskeys:i,userPasskeysLoading:o}=Ht(),{projectSettings:a}=y(),{initPasskeyRecoveryProcess:l}=Ue(),{t:r}=U(),s=!!(!((e=a?.sdk.embeddedWallets)===null||e===void 0)&&e.emailRecoveryEnabled),v=t.jsx(le,{type:"button",onClick:()=>n("wallet-settings"),"data-testid":"back-button",children:t.jsx(F,{})});return t.jsxs("div",{className:"manage-passkeys-widget-view",children:[t.jsx(Be,{leading:v,children:t.jsx("div",{className:"send-balance-page-layout__header-content",children:t.jsx(d,{variant:"title",color:"primary",copykey:"dyn_manage_passkeys.title",children:r("dyn_manage_passkeys.title")})})}),t.jsx(zt,{}),t.jsxs("div",{className:"manage-passkeys-widget-view__body",children:[t.jsx("div",{className:"manage-passkeys-widget-view__body__cards",children:o?t.jsx(qt,{count:1,className:"manage-passkeys-widget-view__body__cards__skeleton"}):i.map(c=>t.jsx(Jt,{passkey:c},c.id))}),s&&t.jsx(f,{buttonPadding:"large",buttonClassName:"manage-passkeys-widget-view__body__recovery-button",onClick:()=>l("passkey"),showInternalLoading:!1,startSlot:t.jsx(ae,{}),copykey:"dyn_manage_passkeys.recovery_button",children:r("dyn_manage_passkeys.recovery_button")})]})]})},Di=()=>{var e,n,i,o,a,l;const{goToInitialDynamicWidgetView:r,setDynamicWidgetView:s}=C(),{authToken:v,projectSettings:c}=y(),{initExportProcess:m}=Zn(),{isTurnkeyWallet:p,isTurnkeyWalletWithoutAuthenticator:h}=Re(),{theme:_}=De(),{t:w}=U(),{initPasskeyRecoveryProcess:L,shouldInitRecovery:I}=Ue(),[S,D]=u.useState(!1),R=Ne(v),M=(n=(e=R?.verifiedCredentials)===null||e===void 0?void 0:e.find(({walletName:N})=>N?.startsWith("turnkey")))===null||n===void 0?void 0:n.walletProperties,de=M?.turnkeyHDWalletId,g=!!(!((l=(a=(o=(i=c?.sdk)===null||i===void 0?void 0:i.embeddedWallets)===null||o===void 0?void 0:o.supportedSecurityMethods)===null||a===void 0?void 0:a.passkey)===null||l===void 0)&&l.isEnabled),j=p&&!h,W=()=>x(void 0,void 0,void 0,function*(){if(j)return s("manage-passkeys");D(!0);try{yield L("passkey")}finally{D(!1)}}),b=N=>x(void 0,void 0,void 0,function*(){return(yield I())&&(yield L(void 0,"reveal")),m(N)}),P=()=>{if(j)return t.jsx(Me,{className:"wallet-settings-view__body__section__button__icon-secondary--success"});if(S)return t.jsx(Gt,{})},J=t.jsx(le,{type:"button",onClick:r,"data-testid":"back-button",children:t.jsx(F,{})});return t.jsxs("div",{className:"wallet-settings-view",children:[t.jsx(Be,{leading:J,children:t.jsx("div",{className:"wallet-settings-view__header",children:t.jsx(d,{variant:"title",color:"primary",copykey:"dyn_wallet_settings.title",children:w("dyn_wallet_settings.title")})})}),t.jsxs("div",{className:"wallet-settings-view__body",children:[g&&t.jsxs("div",{className:"wallet-settings-view__body__section",children:[t.jsx("div",{className:"wallet-settings-view__body__section__title",children:w("dyn_wallet_settings.signing_section.title")}),t.jsx(f,{dataTestId:"manage-passkeys-button",onClick:()=>W(),buttonClassName:"wallet-settings-view__body__section__button",startSlot:t.jsxs("div",{className:"wallet-settings-view__body__section__button__start-slot",children:[t.jsx(Qt,{className:"wallet-settings-view__body__section__button__icon",defaultIcon:t.jsx(Yt,{"data-testid":"default-icon"})}),t.jsx(d,{color:"primary",weight:"medium",copykey:"dyn_wallet_settings.signing_section.passkey_button",children:w("dyn_wallet_settings.signing_section.passkey_button")})]}),endSlot:P(),disabled:S,showInternalLoading:!1})]}),t.jsxs("div",{className:"wallet-settings-view__body__section",children:[t.jsx("div",{className:"wallet-settings-view__body__section__title",children:w("dyn_wallet_settings.export_section.title")}),t.jsx(f,{dataTestId:"embedded-reveal-account-button",onClick:()=>b(),buttonClassName:"wallet-settings-view__body__section__button",startSlot:t.jsxs("div",{className:"wallet-settings-view__body__section__button__start-slot",children:[t.jsx(Mn,{className:`wallet-settings-view__body__section__button__icon${_.theme.name==="dark"?"__stroke":""}`}),t.jsx(d,{color:"primary",weight:"medium",copykey:"dyn_wallet_settings.export_section.private_key_button",children:w("dyn_wallet_settings.export_section.private_key_button")})]}),endSlot:t.jsx(F,{className:"wallet-settings-view__body__section__button__icon-secondary--rotate"}),showInternalLoading:!1}),de&&t.jsx(f,{dataTestId:"embedded-reveal-button",onClick:()=>b(!0),buttonClassName:"wallet-settings-view__body__section__button",startSlot:t.jsxs("div",{className:"wallet-settings-view__body__section__button__start-slot",children:[t.jsx(Bn,{className:`wallet-settings-view__body__section__button__icon${_.theme.name==="dark"?"__stroke":""}`}),t.jsx(d,{color:"primary",weight:"medium",copykey:"dyn_wallet_settings.export_section.srp_button",children:w("dyn_wallet_settings.export_section.srp_button")})]}),endSlot:t.jsx(F,{className:"wallet-settings-view__body__section__button__icon-secondary--rotate"}),showInternalLoading:!1})]})]})]})},Pe={"edit-profile":Ai,"manage-passkeys":Vi,profile:Ei,"send-balance":Li,"wallet-settings":Di,wallets:Ii},Ri=()=>{const{dynamicWidgetView:e}=C(),n=Pe[e]||Pe.wallets;return t.jsx(n,{})},Mi=["wallet-settings"],$i=["manage-passkeys"],Ti=["send-balance"],Ui=[...$i,...Ti,...Mi],Bi=({variant:e,className:n,style:i})=>{const{dynamicWidgetView:o}=C(),a=!Ui.includes(o);return t.jsx(Xt,{children:t.jsxs("div",{className:k(n,"dynamic-user-profile-layout"),style:i,children:[a&&t.jsx(en,{variant:e}),t.jsx(Ri,{}),t.jsx(Pi,{})]})})},Fi=({className:e})=>{const{primaryWallet:n,user:i,authToken:o}=y(),{isOpen:a,setIsOpen:l}=C(),r=n?.address,s=tn(r),v=()=>s?.name?s?.name:r?E(r,3,3):on(i);return t.jsxs("button",{"data-testid":"AccountControl",onClick:()=>l(!a),className:k("account-control__container",{"account-control__container--active":a,"account-control__container--multiwallet-disabled":!0},e),children:[t.jsx(re,{jwt:o,iconSize:16}),t.jsx(d,{className:"account-control__name",as:"p",children:v()}),t.jsx(T,{className:"account-control__icon",color:"text-primary",children:t.jsx(nn,{})})]})},Zi=()=>{const[e,n]=u.useState(!1),{primaryWallet:i,projectSettings:o,network:a}=y(),{inlineControlsRef:l}=C(),r=i?.connector&&i.connector.evmNetworks||[];if(!o)return null;const s=o.sdk.hideNetworkInDynamicWidget;return t.jsx(Fe,{children:t.jsxs("div",{ref:l,"data-testid":"DynamicNav",className:"dynamic-widget-inline-controls",children:[!s&&i&&t.jsx(z,{children:t.jsx(an,{currentNetwork:a,connector:i?.connector,showNetworkName:!0,isNetworkPickerOpen:e,setIsNetworkPickerOpen:n,mainClassName:"dynamic-widget-inline-controls__network-picker-main",buttonClassName:"dynamic-widget-inline-controls__network-picker",listClassName:"dynamic-widget-inline-controls__network-picker-list",checkboxClassName:"dynamic-widget-inline-controls__network-picker-checkbox",evmNetworks:r})}),t.jsx("div",{className:"dynamic-widget-inline-controls__account-control-container",children:t.jsx(Fi,{className:"dynamic-widget-inline-controls__account-control"})})]})})},Ki=({variant:e})=>{const{projectSettings:n}=y(),{setIsOpen:i,isOpen:o,widgetRef:a}=C(),l=u.useMemo(()=>Le()?"modal":e,[e]);return n?t.jsx(Fe,{children:t.jsx(z,{children:t.jsx(Qn,{isOpen:o,setIsOpen:i,variant:l,zIndex:ln,children:t.jsx(sn,{children:t.jsx(rn,{ref:a,children:t.jsx(Bi,{variant:e})})})})})}):null},Hi=({buttonContainerClassName:e="",buttonClassName:n="",innerButtonComponent:i,variant:o="modal"})=>{const{showAuthFlow:a,setShowDynamicUserProfile:l}=y(),{widgetRef:r,inlineControlsRef:s}=C(),{t:v}=U();i||(i=v("dyn_widget.connect"));const c=u.useCallback(p=>{var h;const _=p.composedPath().shift();!((h=s.current)===null||h===void 0)&&h.contains(_)||o==="dropdown"&&!a&&l(!1)},[s,o,a,l]);cn(r,c);const m=!dn();return t.jsx(un,{className:"dynamic-widget__container",id:"dynamic-widget",children:m?t.jsx(Hn,{buttonContainerClassName:e,buttonClassName:n,copykey:"dyn_widget.connect",children:i}):t.jsxs(t.Fragment,{children:[t.jsx(Zi,{}),t.jsx(Ki,{variant:o})]})})};function Ji(){return t.jsx("div",{className:"container",children:t.jsx("div",{className:"earning-page",children:t.jsx(Hi,{variant:"dropdown"})})})}export{Ji as default};