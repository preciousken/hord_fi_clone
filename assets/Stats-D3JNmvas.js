import{j as e,c as te,S as T,p as x,r as d,y as u,aU as ae,aX as A,a2 as G,a6 as F,aY as O,aZ as P,a_ as L,a$ as se,F as re,k as H,N as g,b0 as W,b1 as w,b2 as ne,b3 as Y,b4 as q,b5 as K,b6 as J,b7 as Q,b8 as k,b9 as ie,x as oe,ba as f,B as V,bb as le,u as ce,bc as R,bd as de,e as X,T as he,a3 as me,f as B,be as pe,bf as xe,aa as ue,bg as ge,g as Ce,bh as be,n as fe,bi as Te,a7 as z,w as Se}from"./index-DrakyAIp.js";import{v as U,S as je,s as ye,a as ve,g as S,I as we}from"./cols-DyclnkWh.js";import{T as ke,E as Ve}from"./Table-Cx8JUqQj.js";import{S as Ne,T as v,a as Ee}from"./SectionHeader-BVX3D4Hd.js";import"./vendor-BosuxZz1.js";const ee=({title:t,isSubSection:a,children:s=e.jsx(e.Fragment,{}),className:o,hideChildren:n})=>e.jsxs("div",{className:te("d-flex flex-start mb-6",o),children:[e.jsx("div",{children:e.jsx(T,{at:!!t,children:e.jsx(x,{as:"h2",className:"m-0 text-center text-color-primary font-500 text-left font-4-5",text:t})})}),e.jsx("div",{children:e.jsx(T,{at:!n,children:s})})]}),_e=t=>d.createElement("svg",{width:25,height:24,viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},d.createElement("path",{d:"M16.2415 3.66675H9.25817C6.58317 3.66675 4.4165 5.83341 4.4165 8.50841V10.5417C4.4165 11.0001 4.7915 11.3751 5.24984 11.3751H20.2498C20.7082 11.3751 21.0832 11.0001 21.0832 10.5417V8.50841C21.0832 5.83341 18.9165 3.66675 16.2415 3.66675ZM8.37484 8.87508C8.37484 9.21675 8.0915 9.50008 7.74984 9.50008C7.40817 9.50008 7.12484 9.21675 7.12484 8.87508V7.20841C7.12484 6.86675 7.40817 6.58341 7.74984 6.58341C8.0915 6.58341 8.37484 6.86675 8.37484 7.20841V8.87508ZM11.7082 8.87508C11.7082 9.21675 11.4248 9.50008 11.0832 9.50008C10.7415 9.50008 10.4582 9.21675 10.4582 8.87508V7.20841C10.4582 6.86675 10.7415 6.58341 11.0832 6.58341C11.4248 6.58341 11.7082 6.86675 11.7082 7.20841V8.87508ZM17.7498 8.66675H14.4165C14.0748 8.66675 13.7915 8.38341 13.7915 8.04175C13.7915 7.70008 14.0748 7.41675 14.4165 7.41675H17.7498C18.0915 7.41675 18.3748 7.70008 18.3748 8.04175C18.3748 8.38341 18.0915 8.66675 17.7498 8.66675Z",fill:"#9AA0AB"}),d.createElement("path",{d:"M4.4165 15.4917C4.4165 18.1667 6.58317 20.3334 9.25817 20.3334H16.2332C18.9165 20.3334 21.0832 18.1667 21.0832 15.4917V13.4584C21.0832 13.0001 20.7082 12.6251 20.2498 12.6251H5.24984C4.7915 12.6251 4.4165 13.0001 4.4165 13.4584V15.4917ZM14.4165 15.5417H17.7498C18.0915 15.5417 18.3748 15.8251 18.3748 16.1667C18.3748 16.5084 18.0915 16.7917 17.7498 16.7917H14.4165C14.0748 16.7917 13.7915 16.5084 13.7915 16.1667C13.7915 15.8251 14.0748 15.5417 14.4165 15.5417ZM10.4582 15.3334C10.4582 14.9917 10.7415 14.7084 11.0832 14.7084C11.4248 14.7084 11.7082 14.9917 11.7082 15.3334V17.0001C11.7082 17.3417 11.4248 17.6251 11.0832 17.6251C10.7415 17.6251 10.4582 17.3417 10.4582 17.0001V15.3334ZM7.12484 15.3334C7.12484 14.9917 7.40817 14.7084 7.74984 14.7084C8.0915 14.7084 8.37484 14.9917 8.37484 15.3334V17.0001C8.37484 17.3417 8.0915 17.6251 7.74984 17.6251C7.40817 17.6251 7.12484 17.3417 7.12484 17.0001V15.3334Z",fill:"#9AA0AB"}));function Ie({withTitle:t=!1}){const{validators:a,isLoading:s}=u(r=>r.ethStaking.validatorsInfo),o=U.filter(r=>r.id!==je),n=r=>window.open(ve(r?.public_key),"_blank");return e.jsxs("section",{children:[t&&e.jsx(ee,{title:"Validators"}),e.jsx(ke,{clickable:!0,onRecordClick:n,className:"validation-info-table",sortable:!0,shownColsAtMobile:["validator_index","status"],cols:U,dataSourse:a,loading:s,idProp:"public_key",defaultSortProp:"status",keyMapper:{key:"status",mapper:ye},mobileCols:o,defaultIsAsc:!0,isMobileMethod:ae,noDataContent:e.jsx(Ve,{icon:e.jsx(_e,{}),title:"vdao.transations-no-validator-table-title",content:"Events will appear in the feed shortly"})})]})}const De=[t=>e.jsx(A,{tokens:[{title:"USD",displayValue:()=>`${G(F(S(t)*t.eth_price_usd,2).toString())} USD`,color:O}]}),t=>e.jsx(A,{tokens:[{title:"ETH",displayValue:()=>`${F(S(t),6)} ETH`,color:O}]})],Me=[t=>e.jsxs("div",{children:[e.jsx(P,{wrapperClassname:"w-fit-content"}),e.jsx(L,{renderValue:a=>{const[s,o]=se(a?.all_time_income+a?.execution_rewards+a?.total_withdrawals,a?.eth_price_usd,"mul");return e.jsxs(re,{fullWidth:!1,alignItems:"baseline",children:[e.jsx(H,{className:"font-5 line-height-7-5 font-500 eth-value-stats-graph",children:s}),e.jsx(H,{md:!0,className:"font-light ",children:o})]})},...t,hideImg:!0})]}),t=>e.jsxs("div",{children:[e.jsx(P,{wrapperClassname:"w-fit-content"}),e.jsx(L,{renderValue:a=>e.jsx(g,{className:"font-5 line-height-7-5 font-500 eth-value-stats-graph",number:a?.all_time_income+a?.execution_rewards+a?.total_withdrawals,decimals:4,formatBigNumber:G,formatNumberDisplay:s=>`${s} ETH`}),dolarPercentageDifference:a=>a?.all_time_income+a?.execution_rewards+a?.total_withdrawals,...t,hideImg:!0})]})];function Pe(){const[t,a]=d.useState("inEth"),{mobileMergedState:{currencyType:s,timeFilterOption:o,disabled:n}}=u(h=>({mobileMergedState:h.ethStaking.mergedChartsState})),[r,i,l,m]=W(k[k.length-1]),p=n?m:o,C=n?t:s,N=w.find(h=>h.id===C),E=d.useCallback(h=>S(h)*h?.eth_price_usd,[JSON.stringify(r)]),_=d.useCallback(h=>S(h),[JSON.stringify(r)]),{inUsdChartProps:I,inEthChartProps:D}=ne({inUsdGetYaxisValue:E,inEthGetYaxisValue:_}),M=[I,D].map((h,y)=>({...h,extraCharts:null,renderYaxisTooltip:De[y],renderTopLeft:Me[y]})),[b,j]=M,c=t==="inUsd"?b:j;return e.jsx(e.Fragment,{children:e.jsx(Y,{loading:i,loadingContent:e.jsx(q,{}),cover:e.jsx(K,{isChart:!0,topText:"vdao.nothing-to-show",subTitle:"vdao.this-page-will-be-update-with-live-stats"}),isBlured:i||r.length<3,children:e.jsx(J,{initialTimeFilter:p,renderBesideTimeFilter:e.jsx(Q,{defaultTab:N,onChange:h=>a(h.id),tabs:w,className:"currency-pair-tab"}),currencyType:C,fillOpacity:.3,data:r,onCustomTimeStagesCreated:({selectedTimeFilter:h})=>l(h),ethChartProps:j,usdChartProps:b,...c})})})}const He=1677322586e3;function Ae(){const[t,a,s,o]=W(k[k.length-1],He),{mobileMergedState:{timeFilterOption:n,disabled:r}}=u(p=>({mobileMergedState:p.ethStaking.mergedChartsState})),i=r?o:n,l=d.useCallback(p=>p.apy,[JSON.stringify(t)]),m=ie({getYaxisValue:l});return e.jsx("div",{className:"md-pb-9",children:e.jsx(Y,{loading:a,loadingContent:e.jsx(q,{}),cover:e.jsx(K,{isChart:!0,topText:"vdao.nothing-to-show",subTitle:"vdao.this-page-will-be-update-with-live-stats"}),isBlured:a||t.length<3,children:e.jsx(J,{initialTimeFilter:i,fillOpacity:.3,data:t,onCustomTimeStagesCreated:({selectedTimeFilter:p})=>s(p),...m})})})}const Fe=["hethValue","rewards"];function Oe(){const t=oe(),{mergedChartState:a}=u(l=>({mergedChartState:l.ethStaking.mergedChartsState})),s=w.find(l=>l.id===a.currencyType)??a[0],o=Fe.includes(a.activeTab),n=l=>t(f({currencyType:l.id})),r=l=>t(f({timeFilterOption:l})),i=l=>t(f({activeTab:l.id}));return d.useEffect(()=>(t(f({disabled:!1})),()=>{t(f({disabled:!0}))}),[]),e.jsxs(V,{type:"neutral-100",className:"d-none show-at-575 toolbar-content d-flex flex-column-reverse gap-2 w-100",children:[e.jsx(P,{passedOnChange:i,passedTabId:a.activeTab,wrapperClassname:"w-100 chart-tabs-main"}),e.jsxs("div",{className:"d-flex flex-center-y gap-2",children:[o&&e.jsx(Q,{onChange:n,tabs:w,defaultTab:s,className:"currency-pair-tab"}),e.jsx(le,{className:"flex-1",selectedTabOption:a.timeFilterOption,setSelectedTabOption:r})]})]})}function Le({withTitle:t=!1}){const{currentShownTab:a,mobileToolbarState:s,mobileToolbarStateDisabled:o}=u(m=>({currentShownTab:m.ethStaking.mergedChartsActiveTab,mobileToolbarState:m.ethStaking.mergedChartsState.activeTab,mobileToolbarStateDisabled:m.ethStaking.mergedChartsState.disabled})),n=o?a:s,r=ce(),i=X(r),l=R.filter(m=>m.id===n)?.[0]?.title;return e.jsxs("section",{children:[t&&e.jsx(ee,{title:"Graph"}),e.jsxs(V,{type:"neutral-100",className:"p-6 merged-charts-wrapper relative touch-element",children:[e.jsxs("div",{className:"d-flex flex-center-y gap-2 mb-0-5 show-at-575",children:[e.jsx(Ne,{className:"heth-icon-mobile-chart"}),e.jsx(x,{text:l,className:"mobile-chart-title"})]}),e.jsxs(v,{hideTabPicket:!0,tabs:R,initCurrentTab:n,children:[e.jsx(v.Tab,{tab:"hethValue",children:e.jsx(de,{})}),e.jsx(v.Tab,{tab:"apr",children:e.jsx(Ae,{})}),e.jsx(v.Tab,{tab:"rewards",children:e.jsx(Pe,{})})]}),i&&e.jsx(Oe,{})]})]})}function Re({text:t,tooltipText:a,tooltipProps:s,bottomContent:o,dataSrc:n,render:r,loading:i,dynamicTooltipProps:l,isMobile:m}){const p=m?"":"neutral-100";return e.jsxs(V,{type:p,className:"p-4 sm-d-flex sm-flex-between sm-py-0-25 flex-center-y border-4",children:[e.jsxs("div",{className:"d-flex flex-between flex-center-y gap-2 flex-center-y",children:[e.jsx(x,{sm:!0,text:t,className:"text-color-secondary font-400"}),e.jsx(he,{text:a,...l?l(n):s,placment:"left",children:e.jsx(me,{className:"mt-0-5"})})]}),e.jsx("div",{className:"font-xl sm-font-sm font-500 d-flex flex-center-y mt-3 sm-mt-0",children:e.jsx(B,{loading:i,minHeight:"28px",width:"100%",children:r?.(n,n)})}),e.jsx("div",{className:"mt-2 text-color-secondary font-sm sm-d-none",children:e.jsx(B,{loading:i,minHeight:"17px",width:"100%",children:o?.(n,n)})})]})}const Be={single:{hasS:"",haveOrHas:"has",isOrAre:"is"},plural:{hasS:"s",haveOrHas:"have",isOrAre:"are"}},Ue=[{text:"vdao.eth-staking.pool-balance",tooltipText:"vdao.pool.statistics.pool-balance-tooltip",render:(t,a)=>e.jsx(g,{number:a.poolBalanceInEth,formatNumberDisplay:s=>`${s} ETH`}),bottomContent:t=>e.jsxs("div",{className:"d-flex gap-1 text-color-secondary",children:[e.jsx(g,{number:t.totalRewards,formatNumberDisplay:a=>`${a} ETH`,decimals:2}),e.jsx(x,{sm:!0,text:"vdao.pool.balance-earned"})]})},{text:"vdao.eth-staking.heth-market-cap",tooltipText:"vdao.eth-staking-heth-market-cap-tooltip",render:(t,a)=>e.jsx(g,{number:a.hethMarketCap,formatNumberDisplay:s=>`$${s}`,decimals:2}),bottomContent:t=>e.jsxs("div",{className:"d-flex gap-1 text-color-secondary",children:[e.jsx(g,{number:t.totalSupply,formatNumberDisplay:a=>`${a} hETH`,decimals:2}),e.jsx(x,{sm:!0,text:"vdao.pool.market-cup-minted"})]})},{text:"vdao.eth-staking.total-staker",tooltipText:"vdao.pool.statistics.eth-staking-total-stakers-bottom-tooltip",render:(t,a)=>e.jsx(g,{number:a.totalStakers}),bottomContent:t=>e.jsx(T,{at:!!t.last30DaysStakers,children:e.jsxs("div",{className:"d-flex gap-1 text-color-secondary",children:[e.jsx(g,{number:t.last30DaysStakers,formatNumberDisplay:a=>`+${a}`}),e.jsx(x,{sm:!0,text:"vdao.pool.total-stakers-last-month"})]})})},{text:"vdao.live-validators-title",tooltipText:"vdao.live-validators-title-tooltip",dynamicTooltipProps(t){const a=t.pendingValidators>1?"plural":"single";return{transaltionParams:{extraText:!!t.pendingValidators&&e.jsx(x,{text:"vdao.live-and-pending-validators-tooltip",transaltionParams:{pendingValidators:t.pendingValidators,...Be[a]}})||""}}},render:(t,a)=>e.jsxs("div",{className:"d-flex flex-center-y flex-start gap-2-5",children:[e.jsx(pe,{bg:xe("--states-success"),width:8}),a?.activeValidators||0,"/",a?.activeValidators||0]}),bottomContent:(t,a)=>e.jsx(e.Fragment,{children:a.pendingValidators!==0&&e.jsxs(H,{sm:!0,children:["+",a.pendingValidators," pending"]})})}],$e=t=>d.createElement("svg",{width:20,height:21,viewBox:"0 0 20 21",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},d.createElement("g",{id:"icon_etherscan_20"},d.createElement("g",{id:"Vector"},d.createElement("path",{d:"M4.98519 10.0667C4.98521 9.9713 5.00407 9.87687 5.04068 9.78879C5.07729 9.70072 5.13094 9.62076 5.19854 9.55348C5.26616 9.4862 5.34638 9.43293 5.43463 9.39674C5.52288 9.36055 5.6174 9.34215 5.71279 9.3426L6.91912 9.34653C7.11145 9.34653 7.29591 9.42294 7.43191 9.55894C7.56792 9.69494 7.64433 9.8794 7.64433 10.0717V14.6331C7.78013 14.5928 7.95455 14.5498 8.1454 14.5048C8.27797 14.4737 8.39612 14.3987 8.48069 14.2919C8.56525 14.1852 8.61125 14.053 8.61122 13.9168V8.25872C8.61122 8.06637 8.68762 7.88189 8.82362 7.74587C8.95961 7.60984 9.14408 7.53342 9.33643 7.53338H10.5452C10.7375 7.53342 10.922 7.60984 11.058 7.74587C11.1939 7.88189 11.2704 8.06637 11.2704 8.25872V13.51C11.2704 13.51 11.573 13.3875 11.8678 13.2631C11.9773 13.2168 12.0707 13.1393 12.1364 13.0402C12.2022 12.9411 12.2373 12.8249 12.2374 12.706V6.44571C12.2374 6.2534 12.3138 6.06895 12.4497 5.93295C12.5857 5.79696 12.7701 5.72054 12.9624 5.7205H14.1712C14.3635 5.7205 14.548 5.7969 14.684 5.93291C14.82 6.06891 14.8964 6.25337 14.8964 6.44571V11.6009C15.9443 10.8415 17.0063 9.92807 17.849 8.82973C17.9714 8.67031 18.0522 8.4831 18.0845 8.28482C18.1168 8.08654 18.0996 7.88333 18.0343 7.69333C17.6441 6.57095 17.0241 5.54235 16.2137 4.67336C15.4032 3.80439 14.4203 3.11416 13.3278 2.64686C12.2353 2.17956 11.0573 1.94548 9.86911 1.95959C8.68095 1.9737 7.50882 2.23569 6.42774 2.72881C5.34665 3.22192 4.3804 3.93529 3.59083 4.82328C2.80126 5.71125 2.20576 6.75429 1.84244 7.88563C1.47912 9.01696 1.35598 10.2117 1.4809 11.3933C1.60582 12.575 1.97604 13.7176 2.56788 14.7479C2.67098 14.9257 2.82266 15.0703 3.0051 15.1648C3.18754 15.2594 3.39317 15.2999 3.59784 15.2816C3.82646 15.2615 4.11113 15.233 4.44957 15.1933C4.5969 15.1765 4.73293 15.1062 4.83173 14.9956C4.93054 14.8851 4.98521 14.742 4.98533 14.5937L4.98519 10.0667Z",fill:"#868990"}),d.createElement("path",{d:"M4.95881 17.3826C6.23288 18.3095 7.73855 18.8659 9.30922 18.9902C10.8799 19.1144 12.4543 18.8017 13.8583 18.0866C15.2623 17.3716 16.441 16.2821 17.2643 14.9386C18.0874 13.5952 18.5228 12.0502 18.5224 10.4746C18.5224 10.278 18.5133 10.0835 18.5002 9.89012C15.3799 14.5439 9.61831 16.7202 4.95881 17.3826Z",fill:"#868990"})))),Ze=ue("ETH");function Ge(){const{data:t}=ge({queryKey:[be],enabled:!1}),a=Ce(Ze);return e.jsx(T,{at:!!t,children:e.jsxs("a",{draggable:"false",href:`${a}address/${t}`,target:"_blank",rel:"noreferrer",className:"w-fit-content hover-neutral-300 text-color-secondary py-2 px-3 border-3 d-flex flex-center gap-2 scale-on-click",children:[e.jsx($e,{}),e.jsx(x,{sm:!0,text:"vdao.pool-stats.view-pool-contract",className:"pointer font-500"})]})})}const $=(t=[])=>[...new Set(t)],Z=Date.now()-1e3*30*24*60*60;function We(){const{data:t=[],isLoading:a}=fe({queryKey:["ethDepostitTxs"],queryFn:()=>Te()}),s=t.filter(i=>new Date(i.block_collation_time).getTime()<Z),o=t.filter(i=>new Date(i.block_collation_time).getTime()>=Z);let n=s.map(i=>i.from).map(i=>i.toLocaleLowerCase());n=$(n);let r=o.map(i=>i.from.toLocaleLowerCase());return r=$(r),r=r.filter(i=>!n.includes(i)),[t,r,a]}function Ye(){const{hethMarketCap:t,ethStakingContractsInfo:a,latestHethStat:s,validatorsInfo:{validators:o=[],isLoading:n},loadingLatestHethInfo:r,poolBalanceInEth:i}=u(c=>({hethMarketCap:c.ethStaking.hethInfo.latestHethStat?.heth_market_cap,poolBalanceInEth:c.ethStaking.hethInfo.latestHethStat?.total_pool_balance,loadingLatestHethInfo:c.ethStaking.hethInfo.isLoading,latestHethStat:c.ethStaking.hethInfo.latestHethStat,ethStakingContractsInfo:c.ethStaking.ethStakingContractInfo,validatorsInfo:c.ethStaking.validatorsInfo})),{numberOfUsers:l,totalSupply:m}=a?.info??{},{isLoading:p}=a??{},[,C]=We(),N=d.useMemo(()=>o.filter(c=>c.status==="active_online").length,[o.length]),E=S(s),_=o.filter(c=>c.status===we.PENDING).length,I=[n,r,p].some(c=>c),D={hethMarketCap:t,totalStakers:l,poolBalanceInEth:i,activeValidators:N,totalSupply:m,totalRewards:E,pendingValidators:_,last30DaysStakers:C.length},{contract:{isPaused:M}}=u(c=>({contract:c.ethStaking.isEthStakingContractPaused})),b=X(window.innerWidth,576),j=b?"neutral-100":"";return e.jsx(T,{at:!M||z?.isRegressionBranch,children:e.jsxs("section",{children:[e.jsx(Ee,{title:"vdao.eth-staking.pool-stats",className:"text-left",children:e.jsx(Ge,{})}),e.jsx(V,{type:j,className:"pool-statistics-wrapper border-6 d-flex w-100 sm-flex-column sm-gap-2 sm-p-4",children:Ue.map(c=>e.jsx(Re,{isMobile:b,loading:I,dataSrc:D,...c},c.text))})]})})}const et=()=>{const{push:t}=Se(),{contract:{isPaused:a}}=u(s=>({contract:s.ethStaking.isEthStakingContractPaused}));return d.useEffect(()=>{a&&t("/")},[a]),e.jsx("div",{className:"container",children:e.jsxs("div",{className:"d-flex flex-column w-100 gap-16 md-gap-10",children:[e.jsx(Ye,{}),e.jsx(Le,{withTitle:!0}),z.stage!=="master",e.jsx(Ie,{withTitle:!0})]})})};export{et as default};